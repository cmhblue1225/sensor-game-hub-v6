<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 Shot Target</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 게임 캔버스 -->
    <canvas id="gameCanvas"></canvas>
    
    <!-- 조준점 -->
    <div class="hud-crosshair hidden" id="crosshair"></div>
    
    <!-- UI 오버레이 -->
    <div class="game-ui">
        <!-- 점수 패널 -->
        <div class="ui-panel score-panel">
            <div class="score-title">🎯 점수</div>
            <div class="score-value" id="scoreValue">0</div>
            
            <!-- 타이머 -->
            <div class="timer-section">
                <div class="timer-title">⏱️ 시간</div>
                <div class="timer-value" id="timerValue">3:00</div>
            </div>
            <div class="score-details">
                <div class="score-item">
                    <span>적중:</span>
                    <span id="hitsCount">0</span>
                </div>
                <div class="score-item">
                    <span>빗나감:</span>
                    <span id="missesCount">0</span>
                </div>
                <div class="score-item">
                    <span>연속 콤보:</span>
                    <span id="comboCount">0</span>
                </div>
                <div class="score-item">
                    <span>정확도:</span>
                    <span id="accuracyValue">100%</span>
                </div>
            </div>
        </div>
        
        <!-- 상태 패널 -->
        <div class="ui-panel status-panel">
            <div class="status-item">
                <span class="status-text">서버 연결</span>
                <div class="status-indicator" id="serverStatus"></div>
            </div>
            <div class="status-item solo-mode" id="soloSensorStatus">
                <span class="status-text">센서 연결</span>
                <div class="status-indicator" id="sensorStatus"></div>
            </div>
            <div class="status-item dual-mode hidden" id="dualSensorStatus">
                <span class="status-text">센서1 연결</span>
                <div class="status-indicator" id="sensor1Status"></div>
            </div>
            <div class="status-item dual-mode hidden" id="dualSensorStatus2">
                <span class="status-text">센서2 연결</span>
                <div class="status-indicator" id="sensor2Status"></div>
            </div>
            <div class="status-item">
                <span class="status-text" id="gameStatusText">게임 모드 선택</span>
            </div>
        </div>
        
        <!-- 게임 모드 선택 패널 -->
        <div class="ui-panel mode-selection-panel fade-in" id="modeSelectionPanel">
            <div class="session-title">🎯 Shot Target</div>
            <div class="session-instructions">
                게임 모드를 선택하세요!
            </div>
            
            <div class="mode-selection">
                <button class="mode-btn" id="soloModeBtn">
                    <div class="mode-icon">🎯</div>
                    <div class="mode-title">싱글 플레이</div>
                    <div class="mode-desc">혼자서 표적을 맞춰보세요</div>
                </button>
                
                <button class="mode-btn" id="dualModeBtn">
                    <div class="mode-icon">⚔️</div>
                    <div class="mode-title">경쟁 플레이</div>
                    <div class="mode-desc">2명이 경쟁하여 플레이</div>
                </button>
            </div>
        </div>
        
        <!-- 세션 정보 패널 -->
        <div class="ui-panel session-panel fade-in hidden" id="sessionPanel">
            <div class="session-title" id="sessionTitle">🎯 Shot Target - 싱글 플레이</div>
            <div class="session-instructions" id="sessionInstructions">
                모바일 센서로 조준하여 표적을 맞추는 게임!<br>
                조준점을 표적 중앙에 맞추면 자동으로 발사됩니다.<br>
                아래 코드를 모바일에서 입력하거나 QR 코드를 스캔하세요.
            </div>
            
            <div class="session-code" id="sessionCode">----</div>
            
            <div class="qr-container" id="qrContainer">
                QR 코드 생성 중...
            </div>
            
            <div class="session-instructions">
                📱 센서 클라이언트: <br>
                <strong>/sensor.html</strong>
            </div>
        </div>
        
        <!-- 게임 정보 패널 -->
        <div class="ui-panel game-info-panel hidden" id="gameInfoPanel">
            <div class="info-title">🎯 표적 정보</div>
            <div class="info-grid">
                <div class="info-item target-large-info">
                    <div class="info-icon">🔴</div>
                    <div class="info-label">대형</div>
                    <div class="info-value">100pt</div>
                </div>
                <div class="info-item target-medium-info">
                    <div class="info-icon">🟡</div>
                    <div class="info-label">중형</div>
                    <div class="info-value">200pt</div>
                </div>
                <div class="info-item target-small-info">
                    <div class="info-icon">🟢</div>
                    <div class="info-label">소형</div>
                    <div class="info-value">500pt</div>
                </div>
            </div>
        </div>
        
        <!-- 컨트롤 패널 -->
        <div class="ui-panel control-panel">
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="game.resetGame()" id="resetBtn">🔄 재시작</button>
                <button class="btn btn-primary" onclick="game.togglePause()" id="pauseBtn">⏸️ 일시정지</button>
                <a href="/" class="btn btn-secondary">🏠 허브로</a>
            </div>
        </div>
    </div>
    
    <!-- Socket.IO -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- QR Code Library (폴백 처리 포함) -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    
    <!-- SessionSDK -->
    <script src="/js/SessionSDK.js"></script>
    
    <!-- Shot Target Game Script -->
    <script src="script.js"></script>
</body>
</html>
# Implementation Plan

- [x] 1. 프로젝트 구조 및 기본 파일 설정
























  - 게임 폴더 생성 (`public/games/acorn-battle/`)
  - 기본 HTML 구조 및 CSS 스타일링 구현
  - SessionSDK 통합 및 기본 이벤트 핸들러 설정
  - QR 코드 폴백 처리 구현
  - _Requirements: 6.1, 6.2_

- [x] 2. 게임 엔진 코어 클래스 구현


  - AcornBattleGame 메인 클래스 생성
  - 게임 상태 관리 시스템 구현
  - 캔버스 설정 및 기본 렌더링 루프 구현
  - SessionSDK 이벤트 처리 (`event.detail || event` 패턴 적용)
  - _Requirements: 6.3, 6.4, 6.5_

- [x] 3. 플레이어 시스템 구현




  - Player 클래스 생성 및 기본 속성 정의
  - 센서 데이터 기반 플레이어 이동 로직 구현
  - 플레이어 렌더링 및 애니메이션 구현
  - 맵 경계 제한 및 충돌 경계 설정
  - _Requirements: 1.1, 1.2, 1.3, 1.4_

  - [x] 4. 도토리 관리 시스템 구현





  - Acorn 클래스 및 AcornSpawner 클래스 구현
  - 초기 8개 도토리 배치 로직 구현
  - 5초마다 1개씩 추가 생성 시스템 (최대 15개)
  - 도토리 수집 및 플레이어 상태 업데이트 구현
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5_

- [x] 5. 점수 구역 및 득점 시스템 구현







  - 각 플레이어별 점수 구역 생성 및 렌더링
  - 자신의 점수 구역에서 도토리 저장 로직 구현
  - 점수 증가 및 UI 업데이트 시스템 구현
  - 점수 구역 시각적 피드백 및 애니메이션 추가
  - _Requirements: 3.1, 3.2, 3.3, 3.4_

- [x] 6. 도토리 훔치기 시스템 구현








  - 상대방 점수 구역 침입 감지 로직 구현
  - 도토리 훔치기 조건 검사 및 실행 구현
  - 상대방 점수 감소 및 자신의 도토리 획득 처리
  - 훔치기 성공 시 시각적/청각적 피드백 구현
  - _Requirements: 3.1, 3.2, 3.3, 3.4_

- [x] 7. 움직이는 장애물 시스템 구현





  - Obstacle 클래스 생성 및 기본 이동 로직 구현
  - 2-3개 장애물 배치 및 경계 반사 이동 구현
  - 플레이어-장애물 충돌 감지 시스템 구현
  - 충돌 시 도토리 떨어뜨리기 및 0.5초 기절 처리
  - 기절 후 무적 상태 구현
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 8. 충돌 감지 시스템 구현





  - CollisionManager 클래스 생성
  - 원형 충돌 감지 알고리즘 구현 (플레이어-도토리)
  - 사각형-원형 충돌 감지 구현 (플레이어-장애물)
  - 점수 구역 진입 감지 시스템 구현
  - 충돌 처리 및 게임 상태 업데이트 로직 구현
  - _Requirements: 2.2, 4.3, 4.4_

- [x] 9. 게임 타이머 및 종료 조건 구현













  - 1분 카운트다운 타이머 구현
  - 실시간 타이머 UI 업데이트 구현
  - 게임 종료 조건 검사 및 승부 판정 로직
  - 게임 종료 시 결과 화면 표시 구현
  - _Requirements: 7.1, 7.2, 7.3_

- [x] 10. UI 시스템 구현






  - 실시간 점수 표시 패널 구현
  - 플레이어 연결 상태 표시 구현
  - 게임 시작 버튼 및 컨트롤 패널 구현
  - 도토리 보유 상태 시각적 표시 구현
  - 게임 상태별 UI 전환 로직 구현
  - _Requirements: 5.1, 5.2, 5.3, 5.4, 5.5_

- [x] 11. 세션 관리 및 멀티플레이어 연결 구현








  - 세션 생성 및 QR 코드 표시 구현
  - 2명 플레이어 연결 대기 및 상태 관리
  - 수동 게임 시작 버튼 활성화 로직
  - 플레이어 연결 해제 시 일시정지 처리
  - 재시작 시 세션 유지 기능 구현
  - _Requirements: 6.1, 6.2, 6.3, 6.6, 6.7_

- [x] 12. 센서 데이터 처리 최적화




  - 센서 데이터 throttling 구현 (33ms 간격)
  - 센서 데이터 유효성 검사 및 필터링
  - 플레이어별 센서 데이터 분리 처리
  - 센서 연결 상태 모니터링 및 UI 반영
  - _Requirements: 1.1, 1.2, 1.3_

- [x] 13. 시각적 효과 및 애니메이션 구현




  - 도토리 수집 시 파티클 효과 구현
  - 점수 획득 시 축하 애니메이션 구현
  - 도토리 훔치기 시 경고 효과 구현
  - 장애물 충돌 시 충격 효과 구현
  - 플레이어 이동 트레일 효과 구현
  - _Requirements: 5.3, 5.5_

- [x] 14. 오디오 시스템 구현




  - 도토리 수집 사운드 효과 추가
  - 점수 획득 사운드 구현
  - 도토리 훔치기 사운드 구현
  - 장애물 충돌 사운드 구현
  - 게임 시작/종료 사운드 구현
  - _Requirements: 2.3, 3.2, 4.4_

- [x] 15. 에러 처리 및 예외 상황 관리




  - 서버 연결 오류 처리 및 재연결 로직
  - 센서 연결 해제 시 게임 일시정지 처리
  - 잘못된 센서 데이터 필터링 및 검증
  - 게임 오류 발생 시 복구 메커니즘 구현
  - 사용자 친화적 오류 메시지 표시
  - _Requirements: 6.4, 6.5_

- [x] 16. 성능 최적화 및 메모리 관리



  - 렌더링 최적화 (requestAnimationFrame 사용)
  - 불필요한 객체 생성 최소화
  - 이벤트 리스너 정리 및 메모리 누수 방지
  - 게임 루프 최적화 및 FPS 안정화
  - 모바일 기기 성능 고려한 최적화
  - _Requirements: 전체 성능 요구사항_

- [x] 17. 게임 밸런싱 및 튜닝



  - 플레이어 이동 속도 조정 및 테스트
  - 장애물 이동 속도 및 크기 밸런싱
  - 도토리 생성 간격 및 위치 최적화
  - 기절 시간 및 무적 시간 조정
  - 전체적인 게임 난이도 밸런싱
  - _Requirements: 1.3, 4.5, 7.4_

- [x] 18. 크로스 브라우저 호환성 및 반응형 디자인





  - 다양한 브라우저에서 동작 테스트
  - 모바일 기기별 센서 호환성 확인
  - 반응형 UI 구현 및 다양한 화면 크기 대응
  - 터치 인터페이스 최적화
  - iOS/Android 센서 차이점 처리
  - _Requirements: 전체 호환성 요구사항_

- [x] 19. 통합 테스트 및 디버깅





  - 전체 게임 플로우 테스트 실행
  - 멀티플레이어 동기화 테스트
  - 센서 데이터 정확성 검증
  - 게임 로직 버그 수정 및 검증
  - 사용자 시나리오 기반 테스트 수행
  - _Requirements: 전체 요구사항 검증_

- [x] 20. 최종 폴리싱 및 배포 준비



  - 게임 메타데이터 (game.json) 작성
  - 사용자 가이드 및 조작법 설명 추가
  - 최종 UI/UX 개선 및 시각적 완성도 향상
  - 허브 연동 테스트 및 자동 등록 확인
  - 배포 전 최종 품질 검사 수행
  - _Requirements: 전체 요구사항 완성_
---
inclusion: always
---

# 센서 게임 허브 프로젝트 최우선 지침

## 핵심 원칙

이 프로젝트에서 모든 개발 작업은 다음 문서들을 **최우선 지침**으로 삼아야 합니다:

1. **AI_ASSISTANT_PROMPTS.md** - AI 어시스턴트 개발 가이드라인
2. **DEVELOPER_GUIDE.md** - 센서 게임 허브 개발자 가이드

이 두 문서의 지침에 맞게 게임을 제작하고, `public/games/`에 게임 폴더를 넣으면 자동으로 게임 허브 페이지에 추가됩니다.

## 게임 추가 방식

### 기본 구조
```
public/games/[게임-이름]/
├── index.html (필수)
├── game.json (선택사항 - 없으면 자동 생성)
├── script.js (선택사항)
├── style.css (선택사항)
└── assets/ (선택사항)
```

### 필수 준수사항

1. **SessionSDK 사용**: 모든 게임은 `/js/SessionSDK.js`를 사용해야 함
2. **이벤트 처리 패턴**: `event.detail || event` 패턴 필수 사용
3. **서버 연결 순서**: `connected` 이벤트 후 세션 생성
4. **QR 코드 폴백**: QRCode 라이브러리 실패 시 외부 API 사용
5. **게임 메타데이터**: game.json 형식 준수

### 개발 우선순위

1. **호환성 최우선**: 기존 허브 시스템과 완벽 호환
2. **자동 감지**: 서버 재시작 또는 `/api/admin/rescan`으로 자동 감지
3. **표준 준수**: DEVELOPER_GUIDE.md의 모든 패턴과 규칙 준수

## 한국어 응답 규칙

### 언어 설정
- 모든 응답은 한국어로 작성해야 합니다
- 코드 주석도 가능한 한 한국어로 작성합니다
- 기술 용어는 필요시 영어와 한국어를 병행 표기합니다 (예: "컨테이너(container)")
- 에러 메시지나 로그는 원본 언어를 유지하되, 설명은 한국어로 제공합니다

### 예외 상황
- 코드 자체는 영어로 작성 (변수명, 함수명 등)
- 공식 문서나 명령어는 원본 언어 유지
- 사용자가 명시적으로 다른 언어를 요청하는 경우에만 예외 적용

## 개발 접근 방식

이 프로젝트에서는 복잡한 게임 크리에이터 UI를 만드는 것보다, **기존 시스템의 단순함과 효율성을 유지**하면서 게임 추가 과정을 개선하는 것을 목표로 합니다.

### 핵심 개발 패턴 (AI_ASSISTANT_PROMPTS.md 기준)

#### 필수 구현 패턴
1. **SessionSDK 이벤트 처리**: `event.detail || event` 패턴 필수
2. **서버 연결 순서**: `connected` 이벤트 후 세션 생성
3. **QR 코드 폴백**: 라이브러리 실패 시 외부 API 사용
4. **센서 데이터 구조**: 
   ```javascript
   {
       sensorId: "sensor",
       gameType: "solo",
       data: {
           orientation: { alpha, beta, gamma },
           acceleration: { x, y, z },
           rotationRate: { alpha, beta, gamma }
       }
   }
   ```

#### 자주 발생하는 실수 방지
1. **즉시 세션 생성 금지**: 생성자에서 바로 `createSession()` 호출 금지
2. **CustomEvent 무시 금지**: 반드시 `(event) => event.detail || event` 패턴 사용
3. **QR 라이브러리 의존 금지**: 로드 실패 시 폴백 API 필수

### 권장 방향
1. 게임 템플릿 개선 (GAME_TEMPLATE.html 기반)
2. 자동화된 게임 생성 도구
3. 기존 게임 복제 및 수정 기능
4. 간단한 설정 변경 인터페이스

### 지양할 방향
- 복잡한 비주얼 에디터
- 기존 아키텍처를 크게 변경하는 접근
- 과도한 추상화나 복잡성 추가